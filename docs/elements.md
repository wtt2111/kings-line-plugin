# King's Line - エレメントシステム

## 概要

プレイヤーは試合開始前に **Fire / Ice / Wind / Earth** の4つのエレメントから1つを選択します。
各エレメントには **パッシブ効果**と**SP技（スペシャルアビリティ）**があります。

---

## エレメント選択

### タイミング
- 準備フェーズ（STARTING）中
- **ネザースター**を右クリックでGUIを開く

### ルール
- 試合中は変更不可
- 時間内に選択しない場合はランダムで決定

---

## SPゲージシステム

### 蓄積方法
- 敵プレイヤーへの攻撃1ヒット = **+1ゲージ**
- 最大 **10ゲージ**

### 使用方法
- ゲージが10になったら **SP技アイテム（ネザースター）**を右クリック
- 使用後はゲージ0に戻る
- **クールダウン: 15秒**

---

## 🔥 Fire（炎）

攻撃特化のハイリスク・ハイリターン型。

### パッシブ効果

| 効果 | 数値 |
|------|------|
| 与ダメージ増加 | +7% |
| 攻撃時の炎上確率 | 10% |
| 炎上時間 | 1秒 |
| 被ダメージ増加 | +5%（デメリット） |

### SP技: Overheat（オーバーヒート）

**バーサーカーモード** - 5秒間

| 効果 | 数値 |
|------|------|
| 与ダメージ増加 | +20% |
| 攻撃で必ず炎上 | 2秒 |
| 被ダメージ増加 | +10%（デメリット） |

**使いどころ:**
- キングへのラッシュ
- コア破壊時の突撃
- 1v1での決着

---

## ❄ Ice（氷）

エリア制圧と防御に特化した妨害型。

### パッシブ効果

| 効果 | 数値 |
|------|------|
| Bエリア内でのノックバック耐性 | -20% |
| 被弾時に相手をスロウ | 20%確率 |
| スロウ効果時間 | 1秒 |
| 移動速度低下 | -5%（デメリット） |

### SP技: Ice Age（アイスエイジ）

**範囲凍結** - 即時

| 効果 | 数値 |
|------|------|
| 範囲 | 自分中心 6ブロック |
| 対象人数 | 最大2人 |
| 凍結時間 | 1.5秒 |
| 凍結効果 | 移動・ジャンプ不可（視点・攻撃は可能） |

**使いどころ:**
- Bエリアでの防衛戦
- キング護衛
- 逃げる敵の足止め

---

## 🌪 Wind（風）

高機動力を活かした奇襲型。

### パッシブ効果

| 効果 | 数値 |
|------|------|
| 常時 Speed I | ✓ |
| 常時 Jump Boost I | ✓ |
| 被ダメージ増加 | +10%（デメリット） |

### SP技: Gale Step（ゲイルステップ）

**背後への瞬間移動** - 即時

| 効果 | 数値 |
|------|------|
| 対象範囲 | 視線先 8ブロック以内の敵 |
| 移動先 | 対象の背後 2ブロック |
| 発動後Speed II | 4秒間 |
| 最初の1撃のノックバック増加 | +30% |

**使いどころ:**
- 敵キングへの奇襲
- 逃走中の敵への追撃
- Shard運搬中の敵への妨害

---

## 🪨 Earth（土）

圧倒的な耐久力を持つタンク型。

### パッシブ効果

| 効果 | 数値 |
|------|------|
| 被ダメージ軽減 | -10% |
| ノックバック耐性 | -30% |
| 移動速度低下 | -5%（デメリット） |

### SP技: Bulwark（バルワーク）

**鉄壁モード** - 5秒間

| 効果 | 数値 |
|------|------|
| 被ダメージ軽減 | -20%（合計-30%） |
| ノックバック | さらに半減 |
| 移動速度低下 | -20%（デメリット） |

**使いどころ:**
- コア前での防衛
- Bエリアでの居座り
- キング護衛時の盾役

---

## エレメント相性ガイド

### おすすめ構成（4人チーム）
- **Fire x1** - メインアタッカー
- **Wind x1** - フランカー/裏取り
- **Ice x1** - エリア制圧
- **Earth x1** - タンク/護衛

### 役割別おすすめ
| 役割 | 推奨エレメント |
|------|---------------|
| キング | Earth（耐久力） |
| キング護衛 | Ice, Earth |
| Shard運搬 | Wind（逃走力） |
| コアラッシュ | Fire, Wind |
| Bエリア確保 | Ice, Earth |

---

## 実装メモ

### パッシブ効果の適用タイミング
- ゲーム開始時（`beginGame()`）
- リスポーン時（`onPlayerRespawn()`）
- チームアップグレード適用時（重複防止）

### SP技のクールダウン管理
- `KLPlayer.spCooldownEnd` に終了時刻を記録
- `System.currentTimeMillis()` で比較

### ダメージ計算
- `CombatListener.onEntityDamage()` でダメージ倍率を適用
- Fire/Windは被ダメージ増加があるため注意
